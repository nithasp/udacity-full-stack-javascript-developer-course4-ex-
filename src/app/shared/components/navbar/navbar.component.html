<nav class="navbar">
  <div class="navbar__container">
    <a routerLink="/products" class="navbar__brand" (click)="closeMobileMenu()">
      <span class="navbar__logo">&#9670;</span>
      {{ title }}
    </a>

    <!-- Hamburger toggle (mobile only) -->
    <button
      class="navbar__toggle"
      [class.navbar__toggle--active]="mobileMenuOpen"
      (click)="toggleMobileMenu()"
      [attr.aria-expanded]="mobileMenuOpen"
      aria-label="Toggle navigation"
    >
      <span class="navbar__toggle-bar"></span>
      <span class="navbar__toggle-bar"></span>
      <span class="navbar__toggle-bar"></span>
    </button>

    <!-- Backdrop overlay (mobile only) -->
    <div
      class="navbar__backdrop"
      [class.navbar__backdrop--visible]="mobileMenuOpen"
      (click)="closeMobileMenu()"
      aria-hidden="true"
    ></div>

    <!-- Navigation menu -->
    <div
      class="navbar__menu"
      [class.navbar__menu--open]="mobileMenuOpen"
      [class.navbar__menu--closing]="menuClosing"
      (animationend)="onMenuAnimationDone($event)"
    >
      <ng-container *ngIf="isLoggedIn">
        <a
          routerLink="/products"
          routerLinkActive="navbar__link--active"
          class="navbar__link"
          (click)="closeMobileMenu()"
        >
          <svg class="navbar__link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>
          </svg>
          <span>Products</span>
        </a>

        <a
          routerLink="/cart"
          routerLinkActive="navbar__link--active"
          class="navbar__link navbar__cart-link"
          (click)="closeMobileMenu()"
          aria-label="Cart"
        >
          <span class="navbar__cart-icon-wrap">
            <svg class="navbar__cart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"/>
              <circle cx="20" cy="21" r="1"/>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
            </svg>
            <span *ngIf="cartCount > 0" class="navbar__badge">{{ cartCount }}</span>
          </span>
          <span class="navbar__cart-label">Cart</span>
        </a>

        <button
          class="navbar__link navbar__auth-btn navbar__auth-btn--logout"
          (click)="logout()"
        >
          <svg class="navbar__link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16 17 21 12 16 7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
          <span>Logout</span>
        </button>
      </ng-container>

      <ng-container *ngIf="!isLoggedIn">
        <a
          routerLink="/auth/login"
          routerLinkActive="navbar__link--active"
          [routerLinkActiveOptions]="{ exact: true }"
          class="navbar__link navbar__auth-btn--login"
          (click)="closeMobileMenu()"
        >
          <svg class="navbar__link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
            <polyline points="10 17 15 12 10 7"/>
            <line x1="15" y1="12" x2="3" y2="12"/>
          </svg>
          <span>Login</span>
        </a>

        <a
          routerLink="/auth/register"
          routerLinkActive="navbar__link--active"
          [routerLinkActiveOptions]="{ exact: true }"
          class="navbar__link navbar__auth-btn--register"
          (click)="closeMobileMenu()"
        >
          <svg class="navbar__link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="8.5" cy="7" r="4"/>
            <line x1="20" y1="8" x2="20" y2="14"/>
            <line x1="23" y1="11" x2="17" y2="11"/>
          </svg>
          <span>Register</span>
        </a>
      </ng-container>
    </div>
  </div>
</nav>
